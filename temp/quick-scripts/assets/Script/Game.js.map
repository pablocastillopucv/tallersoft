{"version":3,"sources":["Game.js"],"names":["cc","Class","extends","Component","properties","circlePrefab","default","type","Prefab","cursorPrefab","touchPointPrefab","touchPointNotificacionPrefab","scoreDisplay","Label","horaDisplay","notificacionComida","notificacionTiempo","positionCircle","v2","positionNotification","positionTouchpoint","cantVeces","aux","horaNotificacion","minutoNotificacion","horaInicial","minutoInicial","velocidadReloj","tiempoMax","cantVecesPresiona","arregloSecuencia","onLoad","contador","contadorSecuencia","score","spawnNewCircle","hora","minuto","scheduleOnce","mostrarNotificacionTiempo","spawnTouchPointNotificacion","schedule","mostrarHora","aumentarHora","mostrarNotificacionComida","string","instantiate","node","addChild","setPosition","newCircle","getNewCirclePosition","getComponent","game","push","spawnCircles","i","length","spawnTouchPoints","newTouchPoint","randX","randY","maxX","width","maxY","height","Math","random","spawnTouchPoint","newTouchPointNotificacion","eliminarNotificacionComida","notificacion","getChildByName","destroy","eliminarNotificacionTiempo","gainScore","gameOver","secuenciaCorrecta","parametro1","director","loadScene","update","dt"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        circlePrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        cursorPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        touchPointPrefab:{\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        touchPointNotificacionPrefab:{\r\n            default: null,\r\n            type:cc.Prefab\r\n        },\r\n        scoreDisplay:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        horaDisplay:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        notificacionComida:{\r\n            default:null,\r\n            type:cc.Prefab\r\n        },\r\n        notificacionTiempo:{\r\n            default:null,\r\n            type:cc.Prefab\r\n        },\r\n        positionCircle:cc.v2(0,0),\r\n        positionNotification:cc.v2(0,0),\r\n        positionTouchpoint:cc.v2(0,0),\r\n        cantVeces:4,\r\n        aux:0,\r\n        horaNotificacion:0,\r\n        minutoNotificacion:0,\r\n        horaInicial:0,\r\n        minutoInicial:0,\r\n        velocidadReloj:1,\r\n        tiempoMax:30,\r\n        cantVecesPresiona:0,\r\n        arregloSecuencia:[],\r\n\r\n    },\r\n\r\n    onLoad: function () {\r\n        this.contador = 0;\r\n        this.contadorSecuencia = 0;\r\n        this.score = 0;\r\n        \r\n        this.spawnNewCircle();\r\n\r\n        \r\n\r\n        this.hora = this.horaInicial;\r\n        this.minuto = this.minutoInicial;\r\n\r\n        this.scheduleOnce(function() {\r\n            \r\n            this.mostrarNotificacionTiempo();\r\n            this.spawnTouchPointNotificacion();\r\n            \r\n        },this.tiempoMax+1);\r\n\r\n        \r\n\r\n        this.schedule(function() {\r\n\r\n            this.mostrarHora();\r\n            this.aumentarHora();\r\n            if (this.hora==this.horaNotificacion && this.minuto==this.minutoNotificacion+1 && this.contador==0){\r\n\r\n                this.mostrarNotificacionComida();\r\n                this.spawnTouchPointNotificacion();\r\n                this.contador++;\r\n            }\r\n            \r\n        }, this.velocidadReloj);\r\n\r\n        \r\n      \r\n    },\r\n\r\n    aumentarHora: function() {\r\n\r\n        this.minuto++;\r\n        if(this.minuto == 60){\r\n\r\n            this.minuto = 0;\r\n            this.hora++;\r\n\r\n        }\r\n        if(this.hora>23){\r\n\r\n            this.hora = 0;\r\n\r\n        }\r\n    },\r\n\r\n    mostrarHora: function() {\r\n\r\n        if(this.hora<10 && this.minuto<10){\r\n\r\n            this.horaDisplay.string = '0' + this.hora + ':0' + this.minuto;                \r\n\r\n        }else if(this.hora<10 && this.minuto>=10){\r\n\r\n            this.horaDisplay.string = '0' + this.hora + ':' + this.minuto;                \r\n\r\n        }else if(this.hora>=10 && this.minuto<10){\r\n\r\n            this.horaDisplay.string = this.hora + ':0' + this.minuto;                \r\n\r\n        }else if(this.hora>=10 && this.minuto>=10){\r\n\r\n            this.horaDisplay.string = this.hora + ':' + this.minuto;                \r\n\r\n        }\r\n\r\n    },\r\n\r\n    mostrarNotificacionComida: function() {\r\n\r\n          \r\n        var notificacionComida = cc.instantiate(this.notificacionComida);\r\n        \r\n        this.node.addChild(notificacionComida);\r\n        \r\n        notificacionComida.setPosition(this.positionNotification);\r\n    },\r\n    mostrarNotificacionTiempo: function() {\r\n\r\n        \r\n        var notificacionTiempo = cc.instantiate(this.notificacionTiempo);\r\n        \r\n        this.node.addChild(notificacionTiempo);\r\n        \r\n        notificacionTiempo.setPosition(this.positionNotification);\r\n  },\r\n\r\n    spawnNewCircle: function() {\r\n\r\n        // generate a new node in the scene with a preset template\r\n        var newCircle = cc.instantiate(this.circlePrefab);\r\n        // put the newly added node under the Canvas node\r\n        this.node.addChild(newCircle);\r\n        // set up a random position for the circle\r\n        this.positionCircle = this.getNewCirclePosition();\r\n        newCircle.setPosition(this.positionCircle);\r\n        newCircle.getComponent('Circle').game = this;\r\n        this.arregloSecuencia.push(this.positionCircle);\r\n        \r\n    },\r\n    spawnCircles: function() {\r\n\r\n        for(var i = 0; i<this.arregloSecuencia.length;i++){\r\n\r\n            // generate a new node in the scene with a preset template\r\n            var newCircle = cc.instantiate(this.cursorPrefab);\r\n            // put the newly added node under the Canvas node\r\n            this.node.addChild(newCircle);\r\n            // set up a random position for the circle\r\n            this.positionCircle = this.arregloSecuencia[i];\r\n            newCircle.setPosition(this.positionCircle);\r\n            newCircle.getComponent('CircleSecuencia').game = this;\r\n\r\n        }\r\n        \r\n    },\r\n\r\n    spawnTouchPoints:function(){\r\n\r\n        for(var i = 0; i<this.arregloSecuencia.length;i++){\r\n\r\n            var newTouchPoint = cc.instantiate(this.touchPointPrefab);\r\n            // put the newly added node under the Canvas node\r\n            this.node.addChild(newTouchPoint);\r\n            // set up a random position for the circle\r\n            newTouchPoint.setPosition(this.arregloSecuencia[i]);\r\n            newTouchPoint.getComponent('TouchPoint').game = this;\r\n\r\n        }\r\n    },\r\n\r\n    getNewCirclePosition: function () {\r\n        var randX = 0;\r\n        // According to the position of the ground level and the main character's jump height, randomly obtain an anchor point of the star on the y axis\r\n        var randY = 0;\r\n        // according to the width of the screen, randomly obtain an anchor point of star on the x axis\r\n        var maxX = this.node.width/2;\r\n        var maxY = this.node.height/2;\r\n        randX = (Math.random() - 0.5) * 2 * maxX;\r\n        randY = (Math.random() - 0.5) * 2 * maxY;\r\n        // return to the anchor point of the star\r\n        return cc.v2(randX, randY);\r\n    },\r\n    spawnTouchPoint:function(){\r\n        var newTouchPoint = cc.instantiate(this.touchPointPrefab);\r\n        // put the newly added node under the Canvas node\r\n        this.node.addChild(newTouchPoint);\r\n        // set up a random position for the circle\r\n        newTouchPoint.setPosition(this.positionCircle);\r\n        newTouchPoint.getComponent('TouchPoint').game = this;\r\n    },\r\n    spawnTouchPointNotificacion:function(){\r\n        var newTouchPointNotificacion = cc.instantiate(this.touchPointNotificacionPrefab);\r\n        // put the newly added node under the Canvas node\r\n        this.node.addChild(newTouchPointNotificacion);\r\n        // set up a random position for the circle\r\n        newTouchPointNotificacion.setPosition(this.positionTouchpoint);\r\n        newTouchPointNotificacion.getComponent('TouchPointNotificacion').game = this;\r\n        \r\n    },\r\n\r\n\r\n    eliminarNotificacionComida:function(){\r\n        \r\n        var notificacion = this.node.getChildByName('Notificacion');\r\n        if (notificacion){\r\n            notificacion.destroy();\r\n        }\r\n        \r\n    },\r\n    eliminarNotificacionTiempo:function(){\r\n\r\n        var notificacion = this.node.getChildByName('notificacionTiempo');\r\n        if (notificacion){\r\n            notificacion.destroy();\r\n        }\r\n    },\r\n\r\n    gainScore: function () {\r\n        this.score += 1;\r\n        // update the words of the scoreDisplay Label\r\n        this.scoreDisplay.string = 'Score: ' + this.score;\r\n        if(this.score == 4){\r\n            this.gameOver();\r\n        }\r\n    },\r\n    secuenciaCorrecta:function(parametro1){\r\n        \r\n        this.arregloSecuencia.push(parametro1);\r\n\r\n    },\r\n    gameOver: function(){\r\n        cc.director.loadScene('movimiento');\r\n    },\r\n    update: function(dt) {\r\n        \r\n    },\r\n\r\n});\r\n"]}